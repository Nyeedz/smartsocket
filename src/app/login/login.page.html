<ion-content padding>
  <ion-grid style="height: 100%">
    <ion-row justify-content-center align-items-center style="height: 100%">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Login</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <ion-item>
              <ion-input
                formControlName="unique"
                type="text"
                placeholder="E-mail ou Telefone"
              ></ion-input>
            </ion-item>
            <div class="error-messages">
              <ng-container *ngFor="let error of error_messages.unique">
                <div
                  class="error-message"
                  *ngIf="
                    loginForm.get('unique').hasError(error.type) &&
                    (loginForm.get('unique').dirty ||
                      loginForm.get('unique').touched)
                  "
                >
                  {{ error.message }}
                </div>
              </ng-container>
            </div>

            <ion-item>
              <ion-input
                formControlName="password"
                type="password"
                placeholder="Senha"
              ></ion-input>
            </ion-item>
            <div class="error-messages">
              <ng-container *ngFor="let error of error_messages.password">
                <div
                  class="error-message"
                  *ngIf="
                    loginForm.get('password').hasError(error.type) &&
                    (loginForm.get('password').dirty ||
                      loginForm.get('password').touched)
                  "
                >
                  {{ error.message }}
                </div>
              </ng-container>
            </div>

            <ion-button
              *ngIf="!loading"
              [disabled]="!loginForm.valid"
              padding
              shape="round"
              color="primary"
              expand="block"
              (click)="onSubmit()"
              >Login</ion-button
            >
            <ion-row justify-content-center align-items-center *ngIf="loading">
              <ion-item>
                <ion-spinner></ion-spinner>
              </ion-item>
            </ion-row>
            <ion-row justify-content-center align-items-center padding>
              <a routerLink="/register" class="btn btn-link">Cadastrar</a>
            </ion-row>
          </form>
        </ion-card-content>
      </ion-card>
    </ion-row>
  </ion-grid>
</ion-content>
